var u=(a,e,t)=>new Promise((o,s)=>{var r=l=>{try{n(t.next(l))}catch(i){s(i)}},d=l=>{try{n(t.throw(l))}catch(i){s(i)}},n=l=>l.done?o(l.value):Promise.resolve(l.value).then(r,d);n((t=t.apply(a,e)).next())});import{aX as _,_ as I,E as c,c as p,o as h,I as m,T as g,b as f,W as U,U as v}from"./index-Bgi2T_v5.js";import{Q as C}from"./browser-BfXl-rW9.js";const R={name:"welcome",data(){return{title:"你好啊小玥玥",imageUrl:null,uploadedImage:null,finalImage:null}},components:{Plus:_},methods:{handleImageUpload(a){return u(this,null,function*(){const e=a.target.files[0];if(!e)return;const t=new FileReader;t.onload=o=>u(this,null,function*(){this.uploadedImage=o.target.result,yield this.mergeImageWithQRCode(this.uploadedImage)}),t.readAsDataURL(e)})},mergeImageWithQRCode(a){return u(this,null,function*(){const e=new Image;e.src=a,yield new Promise(n=>e.onload=n);const t=yield C.toDataURL("https://www.baidu.com",{margin:2,scale:10}),o=new Image;o.src=t,yield new Promise(n=>o.onload=n);const s=this.$refs.canvas,r=s.getContext("2d");s.width=e.width,s.height=e.height,r.drawImage(e,0,0,e.width,e.height);const d=Math.floor(e.width*.15);r.drawImage(o,e.width-d,e.height-d,d,d),this.finalImage=s.toDataURL("image/png")})},downloadImage(){const a=document.createElement("a");a.href=this.finalImage,a.download="merged-image.jpg",a.click()},handleImageChange(a){const e=a.raw;if(!e)return;const t=new FileReader;t.onload=o=>{this.imageUrl=o.target.result},t.readAsDataURL(e)}}},k={class:"flex-line"},b=["src"];function y(a,e,t,o,s,r){const d=c("Plus"),n=c("el-icon"),l=c("el-upload"),i=c("el-button"),w=c("el-card");return h(),p("div",null,[m(w,{style:{width:"100%"}},{default:g(()=>[f("div",k,[e[0]||(e[0]=f("div",{class:"left-desc"},"请上传打印图",-1)),m(l,{class:"avatar-uploader",accept:"image/*","auto-upload":!1,"show-file-list":!1,"on-change":a.handleImageChange},{default:g(()=>[a.imageUrl?(h(),p("img",{key:0,src:a.imageUrl,class:"avatar",alt:""},null,8,b)):(h(),U(n,{key:1,class:"avatar-uploader-icon"},{default:g(()=>[m(d)]),_:1}))]),_:1},8,["on-change"])]),f("div",null,[m(l,{action:"","before-upload":a.handleBeforeUpload,"show-file-list":!1},{default:g(()=>[m(i,null,{default:g(()=>e[1]||(e[1]=[v("上传录音/视频")])),_:1})]),_:1},8,["before-upload"])])]),_:1})])}const P=I(R,[["render",y],["__scopeId","data-v-17601342"]]);export{P as default};
